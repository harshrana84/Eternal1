{"ast":null,"code":"function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nexport const cartItemsTotalPrice = (items, coupon = null) => {\n  let total = items.reduce((price, product) => {\n    if (product.salePrice) {\n      return price + product.salePrice * product.quantity;\n    }\n    return price + product.price * product.quantity;\n  }, 0);\n  const discount = coupon ? total * Number(coupon.discountInPercent) / 100 : 0;\n  return total - discount;\n};\n// cartItems, cartItemToAdd\nconst addItemToCart = (state, action) => {\n  const existingCartItemIndex = state.items.findIndex(item => item.id === action.payload.id);\n  if (existingCartItemIndex > -1) {\n    const newState = [...state.items];\n    newState[existingCartItemIndex].quantity += action.payload.quantity;\n    return newState;\n  }\n  return [...state.items, action.payload];\n};\n\n// cartItems, cartItemToRemove\nconst removeItemFromCart = (state, action) => {\n  return state.items.reduce((acc, item) => {\n    if (item.id === action.payload.id) {\n      const newQuantity = item.quantity - action.payload.quantity;\n      return newQuantity > 0 ? [...acc, _objectSpread(_objectSpread({}, item), {}, {\n        quantity: newQuantity\n      })] : [...acc];\n    }\n    return [...acc, item];\n  }, []);\n};\nconst clearItemFromCart = (state, action) => {\n  return state.items.filter(item => item.id !== action.payload.id);\n};\nexport const reducer = (state, action) => {\n  switch (action.type) {\n    case 'REHYDRATE':\n      return _objectSpread(_objectSpread({}, state), action.payload);\n    case 'TOGGLE_CART':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isOpen: !state.isOpen\n      });\n    case 'ADD_ITEM':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        items: addItemToCart(state, action)\n      });\n    case 'REMOVE_ITEM':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        items: removeItemFromCart(state, action)\n      });\n    case 'CLEAR_ITEM_FROM_CART':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        items: clearItemFromCart(state, action)\n      });\n    case 'CLEAR_CART':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        items: []\n      });\n    case 'APPLY_COUPON':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        coupon: action.payload\n      });\n    case 'REMOVE_COUPON':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        coupon: null\n      });\n    default:\n      throw new Error(`Unknown action: ${action.type}`);\n  }\n};","map":{"version":3,"names":["cartItemsTotalPrice","items","coupon","total","reduce","price","product","salePrice","quantity","discount","Number","discountInPercent","addItemToCart","state","action","existingCartItemIndex","findIndex","item","id","payload","newState","removeItemFromCart","acc","newQuantity","_objectSpread","clearItemFromCart","filter","reducer","type","isOpen","Error"],"sources":["C:/Photoshop2021x64/Github Repo/Eternal/src/contexts/cart/cart.reducer.tsx"],"sourcesContent":["export const cartItemsTotalPrice = (items, coupon = null) => {\n  let total = items.reduce((price, product) => {\n    if (product.salePrice) {\n      return price + product.salePrice * product.quantity;\n    }\n    return price + product.price * product.quantity;\n  }, 0);\n  const discount = coupon\n    ? (total * Number(coupon.discountInPercent)) / 100\n    : 0;\n\n  return total - discount;\n};\n// cartItems, cartItemToAdd\nconst addItemToCart = (state, action) => {\n  const existingCartItemIndex = state.items.findIndex(\n    (item) => item.id === action.payload.id\n  );\n\n  if (existingCartItemIndex > -1) {\n    const newState = [...state.items];\n    newState[existingCartItemIndex].quantity += action.payload.quantity;\n    return newState;\n  }\n  return [...state.items, action.payload];\n};\n\n// cartItems, cartItemToRemove\nconst removeItemFromCart = (state, action) => {\n  return state.items.reduce((acc, item) => {\n    if (item.id === action.payload.id) {\n      const newQuantity = item.quantity - action.payload.quantity;\n\n      return newQuantity > 0\n        ? [...acc, { ...item, quantity: newQuantity }]\n        : [...acc];\n    }\n    return [...acc, item];\n  }, []);\n};\n\nconst clearItemFromCart = (state, action) => {\n  return state.items.filter((item) => item.id !== action.payload.id);\n};\n\nexport const reducer = (state, action) => {\n  switch (action.type) {\n    case 'REHYDRATE':\n      return { ...state, ...action.payload };\n    case 'TOGGLE_CART':\n      return { ...state, isOpen: !state.isOpen };\n    case 'ADD_ITEM':\n      return { ...state, items: addItemToCart(state, action) };\n    case 'REMOVE_ITEM':\n      return { ...state, items: removeItemFromCart(state, action) };\n    case 'CLEAR_ITEM_FROM_CART':\n      return { ...state, items: clearItemFromCart(state, action) };\n    case 'CLEAR_CART':\n      return { ...state, items: [] };\n    case 'APPLY_COUPON':\n      return { ...state, coupon: action.payload };\n    case 'REMOVE_COUPON':\n      return { ...state, coupon: null };\n    default:\n      throw new Error(`Unknown action: ${action.type}`);\n  }\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}