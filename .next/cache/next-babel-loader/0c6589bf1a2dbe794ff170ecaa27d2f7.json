{"ast":null,"code":"var _jsxFileName = \"C:\\\\Photoshop2021x64\\\\Github Repo\\\\Eternal\\\\src\\\\contexts\\\\cart\\\\cart.provider.tsx\";\nvar __jsx = React.createElement;\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nimport React, { useReducer, useContext, createContext } from 'react';\nimport { reducer, cartItemsTotalPrice } from './cart.reducer';\nimport { useStorage } from 'helpers/use-storage';\nconst CartContext = /*#__PURE__*/createContext({});\nconst INITIAL_STATE = {\n  isOpen: false,\n  items: [],\n  coupon: null\n};\nconst useCartActions = (initialCart = INITIAL_STATE) => {\n  var _state$items3;\n  const {\n    0: state,\n    1: dispatch\n  } = useReducer(reducer, initialCart);\n  const addItemHandler = (item, quantity = 1) => {\n    dispatch({\n      type: 'ADD_ITEM',\n      payload: _objectSpread(_objectSpread({}, item), {}, {\n        quantity\n      })\n    });\n  };\n  const removeItemHandler = (item, quantity = 1) => {\n    dispatch({\n      type: 'REMOVE_ITEM',\n      payload: _objectSpread(_objectSpread({}, item), {}, {\n        quantity\n      })\n    });\n  };\n  const clearItemFromCartHandler = item => {\n    dispatch({\n      type: 'CLEAR_ITEM_FROM_CART',\n      payload: item\n    });\n  };\n  const clearCartHandler = () => {\n    dispatch({\n      type: 'CLEAR_CART'\n    });\n  };\n  const toggleCartHandler = () => {\n    dispatch({\n      type: 'TOGGLE_CART'\n    });\n  };\n  const couponHandler = coupon => {\n    dispatch({\n      type: 'APPLY_COUPON',\n      payload: coupon\n    });\n  };\n  const removeCouponHandler = () => {\n    dispatch({\n      type: 'REMOVE_COUPON'\n    });\n  };\n  const rehydrateLocalState = payload => {\n    dispatch({\n      type: 'REHYDRATE',\n      payload\n    });\n  };\n  const isInCartHandler = id => {\n    var _state$items;\n    return (_state$items = state.items) === null || _state$items === void 0 ? void 0 : _state$items.some(item => item.id === id);\n  };\n  const getItemHandler = id => {\n    var _state$items2;\n    return (_state$items2 = state.items) === null || _state$items2 === void 0 ? void 0 : _state$items2.find(item => item.id === id);\n  };\n  const getCartItemsPrice = () => cartItemsTotalPrice(state.items).toFixed(2);\n  const getCartItemsTotalPrice = () => cartItemsTotalPrice(state.items, state.coupon).toFixed(2);\n  const getDiscount = () => {\n    var _state$coupon;\n    const total = cartItemsTotalPrice(state.items);\n    const discount = state.coupon ? total * Number((_state$coupon = state.coupon) === null || _state$coupon === void 0 ? void 0 : _state$coupon.discountInPercent) / 100 : 0;\n    return discount.toFixed(2);\n  };\n  const getItemsCount = (_state$items3 = state.items) === null || _state$items3 === void 0 ? void 0 : _state$items3.reduce((acc, item) => acc + item.quantity, 0);\n  return {\n    state,\n    getItemsCount,\n    rehydrateLocalState,\n    addItemHandler,\n    removeItemHandler,\n    clearItemFromCartHandler,\n    clearCartHandler,\n    isInCartHandler,\n    getItemHandler,\n    toggleCartHandler,\n    getCartItemsTotalPrice,\n    getCartItemsPrice,\n    couponHandler,\n    removeCouponHandler,\n    getDiscount\n  };\n};\nexport const CartProvider = ({\n  children\n}) => {\n  var _state$items4;\n  const {\n    state,\n    rehydrateLocalState,\n    getItemsCount,\n    addItemHandler,\n    removeItemHandler,\n    clearItemFromCartHandler,\n    clearCartHandler,\n    isInCartHandler,\n    getItemHandler,\n    toggleCartHandler,\n    getCartItemsTotalPrice,\n    couponHandler,\n    removeCouponHandler,\n    getCartItemsPrice,\n    getDiscount\n  } = useCartActions();\n  const {\n    rehydrated,\n    error\n  } = useStorage(state, rehydrateLocalState);\n  return __jsx(CartContext.Provider, {\n    value: {\n      isOpen: state.isOpen,\n      items: state.items,\n      coupon: state.coupon,\n      cartItemsCount: (_state$items4 = state.items) === null || _state$items4 === void 0 ? void 0 : _state$items4.length,\n      itemsCount: getItemsCount,\n      addItem: addItemHandler,\n      removeItem: removeItemHandler,\n      removeItemFromCart: clearItemFromCartHandler,\n      clearCart: clearCartHandler,\n      isInCart: isInCartHandler,\n      getItem: getItemHandler,\n      toggleCart: toggleCartHandler,\n      calculatePrice: getCartItemsTotalPrice,\n      calculateSubTotalPrice: getCartItemsPrice,\n      applyCoupon: couponHandler,\n      removeCoupon: removeCouponHandler,\n      calculateDiscount: getDiscount\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 5\n    }\n  }, children);\n};\nexport const useCart = () => useContext(CartContext);","map":{"version":3,"names":["React","useReducer","useContext","createContext","reducer","cartItemsTotalPrice","useStorage","CartContext","INITIAL_STATE","isOpen","items","coupon","useCartActions","initialCart","_state$items3","state","dispatch","addItemHandler","item","quantity","type","payload","_objectSpread","removeItemHandler","clearItemFromCartHandler","clearCartHandler","toggleCartHandler","couponHandler","removeCouponHandler","rehydrateLocalState","isInCartHandler","id","_state$items","some","getItemHandler","_state$items2","find","getCartItemsPrice","toFixed","getCartItemsTotalPrice","getDiscount","_state$coupon","total","discount","Number","discountInPercent","getItemsCount","reduce","acc","CartProvider","children","_state$items4","rehydrated","error","__jsx","Provider","value","cartItemsCount","length","itemsCount","addItem","removeItem","removeItemFromCart","clearCart","isInCart","getItem","toggleCart","calculatePrice","calculateSubTotalPrice","applyCoupon","removeCoupon","calculateDiscount","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","useCart"],"sources":["C:/Photoshop2021x64/Github Repo/Eternal/src/contexts/cart/cart.provider.tsx"],"sourcesContent":["import React, { useReducer, useContext, createContext } from 'react';\nimport { reducer, cartItemsTotalPrice } from './cart.reducer';\nimport { useStorage } from 'helpers/use-storage';\nconst CartContext = createContext({} as any);\nconst INITIAL_STATE = {\n  isOpen: false,\n  items: [],\n  coupon: null,\n};\n\nconst useCartActions = (initialCart = INITIAL_STATE) => {\n  const [state, dispatch] = useReducer(reducer, initialCart);\n\n  const addItemHandler = (item, quantity = 1) => {\n    dispatch({ type: 'ADD_ITEM', payload: { ...item, quantity } });\n  };\n\n  const removeItemHandler = (item, quantity = 1) => {\n    dispatch({ type: 'REMOVE_ITEM', payload: { ...item, quantity } });\n  };\n\n  const clearItemFromCartHandler = (item) => {\n    dispatch({ type: 'CLEAR_ITEM_FROM_CART', payload: item });\n  };\n\n  const clearCartHandler = () => {\n    dispatch({ type: 'CLEAR_CART' });\n  };\n  const toggleCartHandler = () => {\n    dispatch({ type: 'TOGGLE_CART' });\n  };\n  const couponHandler = (coupon) => {\n    dispatch({ type: 'APPLY_COUPON', payload: coupon });\n  };\n  const removeCouponHandler = () => {\n    dispatch({ type: 'REMOVE_COUPON' });\n  };\n  const rehydrateLocalState = (payload) => {\n    dispatch({ type: 'REHYDRATE', payload });\n  };\n  const isInCartHandler = (id) => {\n    return state.items?.some((item) => item.id === id);\n  };\n  const getItemHandler = (id) => {\n    return state.items?.find((item) => item.id === id);\n  };\n  const getCartItemsPrice = () => cartItemsTotalPrice(state.items).toFixed(2);\n  const getCartItemsTotalPrice = () =>\n    cartItemsTotalPrice(state.items, state.coupon).toFixed(2);\n\n  const getDiscount = () => {\n    const total = cartItemsTotalPrice(state.items);\n    const discount = state.coupon\n      ? (total * Number(state.coupon?.discountInPercent)) / 100\n      : 0;\n    return discount.toFixed(2);\n  };\n  const getItemsCount = state.items?.reduce(\n    (acc, item) => acc + item.quantity,\n    0\n  );\n  return {\n    state,\n    getItemsCount,\n    rehydrateLocalState,\n    addItemHandler,\n    removeItemHandler,\n    clearItemFromCartHandler,\n    clearCartHandler,\n    isInCartHandler,\n    getItemHandler,\n    toggleCartHandler,\n    getCartItemsTotalPrice,\n    getCartItemsPrice,\n    couponHandler,\n    removeCouponHandler,\n    getDiscount,\n  };\n};\n\nexport const CartProvider = ({ children }) => {\n  const {\n    state,\n    rehydrateLocalState,\n    getItemsCount,\n    addItemHandler,\n    removeItemHandler,\n    clearItemFromCartHandler,\n    clearCartHandler,\n    isInCartHandler,\n    getItemHandler,\n    toggleCartHandler,\n    getCartItemsTotalPrice,\n    couponHandler,\n    removeCouponHandler,\n    getCartItemsPrice,\n    getDiscount,\n  } = useCartActions();\n  const { rehydrated, error } = useStorage(state, rehydrateLocalState);\n\n  return (\n    <CartContext.Provider\n      value={{\n        isOpen: state.isOpen,\n        items: state.items,\n        coupon: state.coupon,\n        cartItemsCount: state.items?.length,\n        itemsCount: getItemsCount,\n        addItem: addItemHandler,\n        removeItem: removeItemHandler,\n        removeItemFromCart: clearItemFromCartHandler,\n        clearCart: clearCartHandler,\n        isInCart: isInCartHandler,\n        getItem: getItemHandler,\n        toggleCart: toggleCartHandler,\n        calculatePrice: getCartItemsTotalPrice,\n        calculateSubTotalPrice: getCartItemsPrice,\n        applyCoupon: couponHandler,\n        removeCoupon: removeCouponHandler,\n        calculateDiscount: getDiscount,\n      }}\n    >\n      {children}\n    </CartContext.Provider>\n  );\n};\n\nexport const useCart = () => useContext(CartContext);\n"],"mappings":";;;;;;;AAAA,OAAOA,KAAK,IAAIC,UAAU,EAAEC,UAAU,EAAEC,aAAa,QAAQ,OAAO;AACpE,SAASC,OAAO,EAAEC,mBAAmB,QAAQ,gBAAgB;AAC7D,SAASC,UAAU,QAAQ,qBAAqB;AAChD,MAAMC,WAAW,gBAAGJ,aAAa,CAAC,CAAC,CAAQ,CAAC;AAC5C,MAAMK,aAAa,GAAG;EACpBC,MAAM,EAAE,KAAK;EACbC,KAAK,EAAE,EAAE;EACTC,MAAM,EAAE;AACV,CAAC;AAED,MAAMC,cAAc,GAAGA,CAACC,WAAW,GAAGL,aAAa,KAAK;EAAA,IAAAM,aAAA;EACtD,MAAM;IAAA,GAACC,KAAK;IAAA,GAAEC;EAAQ,IAAIf,UAAU,CAACG,OAAO,EAAES,WAAW,CAAC;EAE1D,MAAMI,cAAc,GAAGA,CAACC,IAAI,EAAEC,QAAQ,GAAG,CAAC,KAAK;IAC7CH,QAAQ,CAAC;MAAEI,IAAI,EAAE,UAAU;MAAEC,OAAO,EAAAC,aAAA,CAAAA,aAAA,KAAOJ,IAAI;QAAEC;MAAQ;IAAG,CAAC,CAAC;EAChE,CAAC;EAED,MAAMI,iBAAiB,GAAGA,CAACL,IAAI,EAAEC,QAAQ,GAAG,CAAC,KAAK;IAChDH,QAAQ,CAAC;MAAEI,IAAI,EAAE,aAAa;MAAEC,OAAO,EAAAC,aAAA,CAAAA,aAAA,KAAOJ,IAAI;QAAEC;MAAQ;IAAG,CAAC,CAAC;EACnE,CAAC;EAED,MAAMK,wBAAwB,GAAIN,IAAI,IAAK;IACzCF,QAAQ,CAAC;MAAEI,IAAI,EAAE,sBAAsB;MAAEC,OAAO,EAAEH;IAAK,CAAC,CAAC;EAC3D,CAAC;EAED,MAAMO,gBAAgB,GAAGA,CAAA,KAAM;IAC7BT,QAAQ,CAAC;MAAEI,IAAI,EAAE;IAAa,CAAC,CAAC;EAClC,CAAC;EACD,MAAMM,iBAAiB,GAAGA,CAAA,KAAM;IAC9BV,QAAQ,CAAC;MAAEI,IAAI,EAAE;IAAc,CAAC,CAAC;EACnC,CAAC;EACD,MAAMO,aAAa,GAAIhB,MAAM,IAAK;IAChCK,QAAQ,CAAC;MAAEI,IAAI,EAAE,cAAc;MAAEC,OAAO,EAAEV;IAAO,CAAC,CAAC;EACrD,CAAC;EACD,MAAMiB,mBAAmB,GAAGA,CAAA,KAAM;IAChCZ,QAAQ,CAAC;MAAEI,IAAI,EAAE;IAAgB,CAAC,CAAC;EACrC,CAAC;EACD,MAAMS,mBAAmB,GAAIR,OAAO,IAAK;IACvCL,QAAQ,CAAC;MAAEI,IAAI,EAAE,WAAW;MAAEC;IAAQ,CAAC,CAAC;EAC1C,CAAC;EACD,MAAMS,eAAe,GAAIC,EAAE,IAAK;IAAA,IAAAC,YAAA;IAC9B,QAAAA,YAAA,GAAOjB,KAAK,CAACL,KAAK,cAAAsB,YAAA,uBAAXA,YAAA,CAAaC,IAAI,CAAEf,IAAI,IAAKA,IAAI,CAACa,EAAE,KAAKA,EAAE,CAAC;EACpD,CAAC;EACD,MAAMG,cAAc,GAAIH,EAAE,IAAK;IAAA,IAAAI,aAAA;IAC7B,QAAAA,aAAA,GAAOpB,KAAK,CAACL,KAAK,cAAAyB,aAAA,uBAAXA,aAAA,CAAaC,IAAI,CAAElB,IAAI,IAAKA,IAAI,CAACa,EAAE,KAAKA,EAAE,CAAC;EACpD,CAAC;EACD,MAAMM,iBAAiB,GAAGA,CAAA,KAAMhC,mBAAmB,CAACU,KAAK,CAACL,KAAK,CAAC,CAAC4B,OAAO,CAAC,CAAC,CAAC;EAC3E,MAAMC,sBAAsB,GAAGA,CAAA,KAC7BlC,mBAAmB,CAACU,KAAK,CAACL,KAAK,EAAEK,KAAK,CAACJ,MAAM,CAAC,CAAC2B,OAAO,CAAC,CAAC,CAAC;EAE3D,MAAME,WAAW,GAAGA,CAAA,KAAM;IAAA,IAAAC,aAAA;IACxB,MAAMC,KAAK,GAAGrC,mBAAmB,CAACU,KAAK,CAACL,KAAK,CAAC;IAC9C,MAAMiC,QAAQ,GAAG5B,KAAK,CAACJ,MAAM,GACxB+B,KAAK,GAAGE,MAAM,EAAAH,aAAA,GAAC1B,KAAK,CAACJ,MAAM,cAAA8B,aAAA,uBAAZA,aAAA,CAAcI,iBAAiB,CAAC,GAAI,GAAG,GACvD,CAAC;IACL,OAAOF,QAAQ,CAACL,OAAO,CAAC,CAAC,CAAC;EAC5B,CAAC;EACD,MAAMQ,aAAa,IAAAhC,aAAA,GAAGC,KAAK,CAACL,KAAK,cAAAI,aAAA,uBAAXA,aAAA,CAAaiC,MAAM,CACvC,CAACC,GAAG,EAAE9B,IAAI,KAAK8B,GAAG,GAAG9B,IAAI,CAACC,QAAQ,EAClC,CACF,CAAC;EACD,OAAO;IACLJ,KAAK;IACL+B,aAAa;IACbjB,mBAAmB;IACnBZ,cAAc;IACdM,iBAAiB;IACjBC,wBAAwB;IACxBC,gBAAgB;IAChBK,eAAe;IACfI,cAAc;IACdR,iBAAiB;IACjBa,sBAAsB;IACtBF,iBAAiB;IACjBV,aAAa;IACbC,mBAAmB;IACnBY;EACF,CAAC;AACH,CAAC;AAED,OAAO,MAAMS,YAAY,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAA,IAAAC,aAAA;EAC5C,MAAM;IACJpC,KAAK;IACLc,mBAAmB;IACnBiB,aAAa;IACb7B,cAAc;IACdM,iBAAiB;IACjBC,wBAAwB;IACxBC,gBAAgB;IAChBK,eAAe;IACfI,cAAc;IACdR,iBAAiB;IACjBa,sBAAsB;IACtBZ,aAAa;IACbC,mBAAmB;IACnBS,iBAAiB;IACjBG;EACF,CAAC,GAAG5B,cAAc,CAAC,CAAC;EACpB,MAAM;IAAEwC,UAAU;IAAEC;EAAM,CAAC,GAAG/C,UAAU,CAACS,KAAK,EAAEc,mBAAmB,CAAC;EAEpE,OACEyB,KAAA,CAAC/C,WAAW,CAACgD,QAAQ;IACnBC,KAAK,EAAE;MACL/C,MAAM,EAAEM,KAAK,CAACN,MAAM;MACpBC,KAAK,EAAEK,KAAK,CAACL,KAAK;MAClBC,MAAM,EAAEI,KAAK,CAACJ,MAAM;MACpB8C,cAAc,GAAAN,aAAA,GAAEpC,KAAK,CAACL,KAAK,cAAAyC,aAAA,uBAAXA,aAAA,CAAaO,MAAM;MACnCC,UAAU,EAAEb,aAAa;MACzBc,OAAO,EAAE3C,cAAc;MACvB4C,UAAU,EAAEtC,iBAAiB;MAC7BuC,kBAAkB,EAAEtC,wBAAwB;MAC5CuC,SAAS,EAAEtC,gBAAgB;MAC3BuC,QAAQ,EAAElC,eAAe;MACzBmC,OAAO,EAAE/B,cAAc;MACvBgC,UAAU,EAAExC,iBAAiB;MAC7ByC,cAAc,EAAE5B,sBAAsB;MACtC6B,sBAAsB,EAAE/B,iBAAiB;MACzCgC,WAAW,EAAE1C,aAAa;MAC1B2C,YAAY,EAAE1C,mBAAmB;MACjC2C,iBAAiB,EAAE/B;IACrB,CAAE;IAAAgC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAED3B,QACmB,CAAC;AAE3B,CAAC;AAED,OAAO,MAAM4B,OAAO,GAAGA,CAAA,KAAM5E,UAAU,CAACK,WAAW,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module"}