{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nexport var cartItemsTotalPrice = function cartItemsTotalPrice(items) {\n  var coupon = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  var total = items.reduce(function (price, product) {\n    if (product.salePrice) {\n      return price + product.salePrice * product.quantity;\n    }\n    return price + product.price * product.quantity;\n  }, 0);\n  var discount = coupon ? total * Number(coupon.discountInPercent) / 100 : 0;\n  return total - discount;\n};\n// cartItems, cartItemToAdd\nvar addItemToCart = function addItemToCart(state, action) {\n  var existingCartItemIndex = state.items.findIndex(function (item) {\n    return item.id === action.payload.id;\n  });\n  if (existingCartItemIndex > -1) {\n    var newState = _toConsumableArray(state.items);\n    newState[existingCartItemIndex].quantity += action.payload.quantity;\n    return newState;\n  }\n  return [].concat(_toConsumableArray(state.items), [action.payload]);\n};\n\n// cartItems, cartItemToRemove\nvar removeItemFromCart = function removeItemFromCart(state, action) {\n  return state.items.reduce(function (acc, item) {\n    if (item.id === action.payload.id) {\n      var newQuantity = item.quantity - action.payload.quantity;\n      return newQuantity > 0 ? [].concat(_toConsumableArray(acc), [_objectSpread(_objectSpread({}, item), {}, {\n        quantity: newQuantity\n      })]) : _toConsumableArray(acc);\n    }\n    return [].concat(_toConsumableArray(acc), [item]);\n  }, []);\n};\nvar clearItemFromCart = function clearItemFromCart(state, action) {\n  return state.items.filter(function (item) {\n    return item.id !== action.payload.id;\n  });\n};\nexport var reducer = function reducer(state, action) {\n  switch (action.type) {\n    case 'REHYDRATE':\n      return _objectSpread(_objectSpread({}, state), action.payload);\n    case 'TOGGLE_CART':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isOpen: !state.isOpen\n      });\n    case 'ADD_ITEM':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        items: addItemToCart(state, action)\n      });\n    case 'REMOVE_ITEM':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        items: removeItemFromCart(state, action)\n      });\n    case 'CLEAR_ITEM_FROM_CART':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        items: clearItemFromCart(state, action)\n      });\n    case 'CLEAR_CART':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        items: []\n      });\n    case 'APPLY_COUPON':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        coupon: action.payload\n      });\n    case 'REMOVE_COUPON':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        coupon: null\n      });\n    default:\n      throw new Error(\"Unknown action: \".concat(action.type));\n  }\n};","map":{"version":3,"names":["cartItemsTotalPrice","items","coupon","arguments","length","undefined","total","reduce","price","product","salePrice","quantity","discount","Number","discountInPercent","addItemToCart","state","action","existingCartItemIndex","findIndex","item","id","payload","newState","_toConsumableArray","concat","removeItemFromCart","acc","newQuantity","_objectSpread","clearItemFromCart","filter","reducer","type","isOpen","Error"],"sources":["C:/Photoshop2021x64/Github Repo/Eternal/src/contexts/cart/cart.reducer.tsx"],"sourcesContent":["export const cartItemsTotalPrice = (items, coupon = null) => {\n  let total = items.reduce((price, product) => {\n    if (product.salePrice) {\n      return price + product.salePrice * product.quantity;\n    }\n    return price + product.price * product.quantity;\n  }, 0);\n  const discount = coupon\n    ? (total * Number(coupon.discountInPercent)) / 100\n    : 0;\n\n  return total - discount;\n};\n// cartItems, cartItemToAdd\nconst addItemToCart = (state, action) => {\n  const existingCartItemIndex = state.items.findIndex(\n    (item) => item.id === action.payload.id\n  );\n\n  if (existingCartItemIndex > -1) {\n    const newState = [...state.items];\n    newState[existingCartItemIndex].quantity += action.payload.quantity;\n    return newState;\n  }\n  return [...state.items, action.payload];\n};\n\n// cartItems, cartItemToRemove\nconst removeItemFromCart = (state, action) => {\n  return state.items.reduce((acc, item) => {\n    if (item.id === action.payload.id) {\n      const newQuantity = item.quantity - action.payload.quantity;\n\n      return newQuantity > 0\n        ? [...acc, { ...item, quantity: newQuantity }]\n        : [...acc];\n    }\n    return [...acc, item];\n  }, []);\n};\n\nconst clearItemFromCart = (state, action) => {\n  return state.items.filter((item) => item.id !== action.payload.id);\n};\n\nexport const reducer = (state, action) => {\n  switch (action.type) {\n    case 'REHYDRATE':\n      return { ...state, ...action.payload };\n    case 'TOGGLE_CART':\n      return { ...state, isOpen: !state.isOpen };\n    case 'ADD_ITEM':\n      return { ...state, items: addItemToCart(state, action) };\n    case 'REMOVE_ITEM':\n      return { ...state, items: removeItemFromCart(state, action) };\n    case 'CLEAR_ITEM_FROM_CART':\n      return { ...state, items: clearItemFromCart(state, action) };\n    case 'CLEAR_CART':\n      return { ...state, items: [] };\n    case 'APPLY_COUPON':\n      return { ...state, coupon: action.payload };\n    case 'REMOVE_COUPON':\n      return { ...state, coupon: null };\n    default:\n      throw new Error(`Unknown action: ${action.type}`);\n  }\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}